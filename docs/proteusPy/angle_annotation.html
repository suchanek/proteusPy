<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.6.1"/>
    <title>proteusPy.angle_annotation API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
        overflow-y: hidden;
    }
</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../proteusPy.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;proteusPy</a>

            <img src="./logo.png" class="logo" alt="project logo"/>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

            <h2>Contents</h2>
            <ul>
  <li><a href="#scale-invariant-angle-label">Scale invariant angle label</a></li>
</ul>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#AngleAnnotation">AngleAnnotation</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AngleAnnotation.__init__">AngleAnnotation</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.ax">ax</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.vec1">vec1</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.vec2">vec2</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.size">size</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.unit">unit</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.textposition">textposition</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.kw">kw</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.text">text</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.get_size">get_size</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.set_size">set_size</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.get_center_in_pixels">get_center_in_pixels</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.set_center">set_center</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.get_theta">get_theta</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.get_theta1">get_theta1</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.get_theta2">get_theta2</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.set_theta">set_theta</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.theta1">theta1</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.theta2">theta2</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.width">width</a>
                        </li>
                        <li>
                                <a class="variable" href="#AngleAnnotation.height">height</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.draw">draw</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.update_text">update_text</a>
                        </li>
                        <li>
                                <a class="function" href="#AngleAnnotation.set">set</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#plot_angle">plot_angle</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../proteusPy.html">proteusPy</a><wbr>.angle_annotation    </h1>

                        <div class="docstring"><p>===========================</p>

<h1 id="scale-invariant-angle-label">Scale invariant angle label</h1>

<p>This example shows how to create a scale invariant angle annotation. It is
often useful to mark angles between lines or inside shapes with a circular arc.
While Matplotlib provides an <code>~.patches.Arc</code>, an inherent problem when directly
using it for such purposes is that an arc being circular in data space is not
necessarily circular in display space. Also, the arc's radius is often best
defined in a coordinate system which is independent of the actual data
coordinates - at least if you want to be able to freely zoom into your plot
without the annotation growing to infinity.</p>

<p>This calls for a solution where the arc's center is defined in data space, but
its radius in a physical unit like points or pixels, or as a ratio of the Axes
dimension. The following <code><a href="#AngleAnnotation">AngleAnnotation</a></code> class provides such solution.</p>

<p>The example below serves two purposes:</p>

<ul>
<li>It provides a ready-to-use solution for the problem of easily drawing angles
in graphs.</li>
<li>It shows how to subclass a Matplotlib artist to enhance its functionality, as
well as giving a hands-on example on how to use Matplotlib's :doc:<code>transform
system &lt;/tutorials/advanced/transforms_tutorial&gt;</code>.</li>
</ul>

<p>If mainly interested in the former, you may copy the below class and jump to
the :ref:<code>angle-annotation-usage</code> section.</p>
</div>

                        <input id="mod-angle_annotation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-angle_annotation-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">===========================</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">Scale invariant angle label</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="sd">===========================</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">This example shows how to create a scale invariant angle annotation. It is</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">often useful to mark angles between lines or inside shapes with a circular arc.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd">While Matplotlib provides an `~.patches.Arc`, an inherent problem when directly</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">using it for such purposes is that an arc being circular in data space is not</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="sd">necessarily circular in display space. Also, the arc&#39;s radius is often best</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">defined in a coordinate system which is independent of the actual data</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">coordinates - at least if you want to be able to freely zoom into your plot</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">without the annotation growing to infinity.</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">This calls for a solution where the arc&#39;s center is defined in data space, but</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">its radius in a physical unit like points or pixels, or as a ratio of the Axes</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">dimension. The following ``AngleAnnotation`` class provides such solution.</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">The example below serves two purposes:</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">* It provides a ready-to-use solution for the problem of easily drawing angles</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">  in graphs.</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">* It shows how to subclass a Matplotlib artist to enhance its functionality, as</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">  well as giving a hands-on example on how to use Matplotlib&#39;s :doc:`transform</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">  system &lt;/tutorials/advanced/transforms_tutorial&gt;`.</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">If mainly interested in the former, you may copy the below class and jump to</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">the :ref:`angle-annotation-usage` section.</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="c1">#########################################################################</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="c1"># AngleAnnotation class</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="c1"># ~~~~~~~~~~~~~~~~~~~~~</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="c1"># The essential idea here is to subclass `~.patches.Arc` and set its transform</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="c1"># to the `~.transforms.IdentityTransform`, making the parameters of the arc</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="c1"># defined in pixel space.</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="c1"># We then override the ``Arc``&#39;s attributes ``_center``, ``theta1``,</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="c1"># ``theta2``, ``width`` and ``height`` and make them properties, coupling to</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="c1"># internal methods that calculate the respective parameters each time the</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="c1"># attribute is accessed and thereby ensuring that the arc in pixel space stays</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="c1"># synchronized with the input points and size.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="c1"># For example, each time the arc&#39;s drawing method would query its ``_center``</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="c1"># attribute, instead of receiving the same number all over again, it will</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="c1"># instead receive the result of the ``get_center_in_pixels`` method we defined</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="c1"># in the subclass. This method transforms the center in data coordinates to</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="c1"># pixels via the Axes transform ``ax.transData``. The size and the angles are</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="c1"># calculated in a similar fashion, such that the arc changes its shape</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="c1"># automatically when e.g. zooming or panning interactively.</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="c1">#</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="c1"># The functionality of this class allows to annotate the arc with a text. This</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="c1"># text is a `~.text.Annotation` stored in an attribute ``text``. Since the</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="c1"># arc&#39;s position and radius are defined only at draw time, we need to update</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="c1"># the text&#39;s position accordingly. This is done by reimplementing the ``Arc``&#39;s</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="c1"># ``draw()`` method to let it call an updating method for the text.</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="c1">#</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="c1"># The arc and the text will be added to the provided Axes at instantiation: it</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="c1"># is hence not strictly necessary to keep a reference to it.</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="kn">from</span> <span class="nn">matplotlib.patches</span> <span class="kn">import</span> <span class="n">Arc</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="kn">from</span> <span class="nn">matplotlib.transforms</span> <span class="kn">import</span> <span class="n">Bbox</span><span class="p">,</span> <span class="n">IdentityTransform</span><span class="p">,</span> <span class="n">TransformedBbox</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="k">class</span> <span class="nc">AngleAnnotation</span><span class="p">(</span><span class="n">Arc</span><span class="p">):</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">    Draws an arc between two vectors which appears circular in display space.</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>        <span class="n">xy</span><span class="p">,</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>        <span class="n">p1</span><span class="p">,</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>        <span class="n">p2</span><span class="p">,</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>        <span class="n">size</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;points&quot;</span><span class="p">,</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>        <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>        <span class="n">textposition</span><span class="o">=</span><span class="s2">&quot;inside&quot;</span><span class="p">,</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>        <span class="n">text_kw</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>        <span class="o">**</span><span class="n">kwargs</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>    <span class="p">):</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">        Parameters</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">        ----------</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">        xy, p1, p2 : tuple or array of two floats</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">            Center position and two points. Angle annotation is drawn between</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">            the two vectors connecting *p1* and *p2* with *xy*, respectively.</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">            Units are data coordinates.</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">        size : float</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">            Diameter of the angle annotation in units specified by *unit*.</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">        unit : str</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">            One of the following strings to specify the unit of *size*:</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">            * &quot;pixels&quot;: pixels</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">            * &quot;points&quot;: points, use points instead of pixels to not have a</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">              dependence on the DPI</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">            * &quot;axes width&quot;, &quot;axes height&quot;: relative units of Axes width, height</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">            * &quot;axes min&quot;, &quot;axes max&quot;: minimum or maximum of relative Axes</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">              width, height</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">        ax : `matplotlib.axes.Axes`</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">            The Axes to add the angle annotation to.</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">        text : str</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">            The text to mark the angle with.</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">        textposition : {&quot;inside&quot;, &quot;outside&quot;, &quot;edge&quot;}</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">            Whether to show the text in- or outside the arc. &quot;edge&quot; can be used</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">            for custom positions anchored at the arc&#39;s edge.</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">        text_kw : dict</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">            Dictionary of arguments passed to the Annotation.</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">        **kwargs</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">            Further parameters are passed to `matplotlib.patches.Arc`. Use this</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">            to specify, color, linewidth etc. of the arc.</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span> <span class="ow">or</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span> <span class="o">=</span> <span class="n">xy</span>  <span class="c1"># in data coordinates</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vec1</span> <span class="o">=</span> <span class="n">p1</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vec2</span> <span class="o">=</span> <span class="n">p2</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">=</span> <span class="n">textposition</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span><span class="p">,</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>            <span class="n">size</span><span class="p">,</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>            <span class="n">size</span><span class="p">,</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>            <span class="n">angle</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>            <span class="n">theta1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">theta1</span><span class="p">,</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>            <span class="n">theta2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">theta2</span><span class="p">,</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>            <span class="o">**</span><span class="n">kwargs</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>        <span class="p">)</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">IdentityTransform</span><span class="p">())</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>            <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>            <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>            <span class="n">xycoords</span><span class="o">=</span><span class="n">IdentityTransform</span><span class="p">(),</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>            <span class="n">textcoords</span><span class="o">=</span><span class="s2">&quot;offset points&quot;</span><span class="p">,</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>            <span class="n">annotation_clip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>        <span class="p">)</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kw</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">text_kw</span> <span class="ow">or</span> <span class="p">{})</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_center</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kw</span><span class="p">)</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>    <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>        <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;points&quot;</span><span class="p">:</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">/</span> <span class="mf">72.0</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;axes&quot;</span><span class="p">:</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>            <span class="n">b</span> <span class="o">=</span> <span class="n">TransformedBbox</span><span class="p">(</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>            <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>            <span class="p">}</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="n">dic</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[</span><span class="mi">5</span><span class="p">:]]</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">*</span> <span class="n">factor</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>    <span class="k">def</span> <span class="nf">set_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>    <span class="k">def</span> <span class="nf">get_center_in_pixels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;return center in pixels&quot;&quot;&quot;</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span><span class="p">)</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>    <span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xy</span><span class="p">):</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;set center in data coordinates&quot;&quot;&quot;</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span> <span class="o">=</span> <span class="n">xy</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>    <span class="k">def</span> <span class="nf">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vec</span><span class="p">):</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>        <span class="n">vec_in_pixels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">vec_in_pixels</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vec_in_pixels</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>    <span class="k">def</span> <span class="nf">get_theta1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vec1</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>    <span class="k">def</span> <span class="nf">get_theta2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vec2</span><span class="p">)</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>    <span class="k">def</span> <span class="nf">set_theta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>        <span class="k">pass</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>    <span class="c1"># Redefine attributes of the Arc to always give values in pixel space</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>    <span class="n">_center</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_center_in_pixels</span><span class="p">,</span> <span class="n">set_center</span><span class="p">)</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>    <span class="n">theta1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_theta1</span><span class="p">,</span> <span class="n">set_theta</span><span class="p">)</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>    <span class="n">theta2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_theta2</span><span class="p">,</span> <span class="n">set_theta</span><span class="p">)</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>    <span class="n">width</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_size</span><span class="p">,</span> <span class="n">set_size</span><span class="p">)</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>    <span class="n">height</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_size</span><span class="p">,</span> <span class="n">set_size</span><span class="p">)</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>    <span class="c1"># The following two methods are needed to update the text position.</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_text</span><span class="p">()</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>    <span class="k">def</span> <span class="nf">update_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>        <span class="n">angle_span</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>        <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta1</span> <span class="o">+</span> <span class="n">angle_span</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>        <span class="n">r</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">==</span> <span class="s2">&quot;inside&quot;</span><span class="p">:</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>            <span class="n">r</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">angle_span</span><span class="p">,</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">3.8</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)])</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">==</span> <span class="s2">&quot;outside&quot;</span><span class="p">:</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>            <span class="k">def</span> <span class="nf">R90</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>                <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)):</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>                    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>                    <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>                    <span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">a</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">c</span><span class="p">))</span> <span class="o">/</span> <span class="n">r</span><span class="p">)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>                    <span class="n">xy</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">T</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">T</span><span class="p">)])</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>                    <span class="n">xy</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">])</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>                    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xy</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>            <span class="k">def</span> <span class="nf">R</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>                <span class="n">aa</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span> <span class="o">*</span> <span class="p">((</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>                <span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>                <span class="k">return</span> <span class="n">R90</span><span class="p">(</span><span class="n">aa</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">][::</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">)))])</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>            <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>            <span class="n">X</span> <span class="o">=</span> <span class="n">R</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>            <span class="n">offs</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform</span><span class="p">(((</span><span class="n">X</span> <span class="o">-</span> <span class="n">s</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">72</span>  <span class="c1"># !!!</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="n">offs</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">offs</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)])</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="c1"># Helper function to draw angle easily.</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="k">def</span> <span class="nf">plot_angle</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">acol</span><span class="o">=</span><span class="s2">&quot;C0&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>    <span class="n">vec2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">))])</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>    <span class="n">xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[[</span><span class="n">length</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">vec2</span> <span class="o">*</span> <span class="n">length</span><span class="p">]</span><span class="o">.</span><span class="n">T</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">xy</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">acol</span><span class="p">)</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>    <span class="k">return</span> <span class="n">AngleAnnotation</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xy</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="c1">#########################################################################</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="c1"># ``AngleLabel`` options</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="c1"># ~~~~~~~~~~~~~~~~~~~~~~</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="c1">#</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="c1"># The *textposition* and *unit* keyword arguments may be used to modify the</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="c1"># location of the text label, as shown below:</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">fig, (ax1, ax2) = plt.subplots(nrows=2, sharex=True)</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">fig.suptitle(&quot;AngleLabel keyword arguments&quot;)</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">fig.canvas.draw()  # Need to draw the figure to define renderer</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a><span class="sd"># Showcase different text positions.</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a><span class="sd">ax1.margins(y=0.4)</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="sd">ax1.set_title(&quot;textposition&quot;)</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a><span class="sd">kw = dict(size=75, unit=&quot;points&quot;, text=r&quot;$60$&quot;)</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a><span class="sd">am6 = plot_angle(ax1, (2.0, 0), 60, textposition=&quot;inside&quot;, **kw)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a><span class="sd">am7 = plot_angle(ax1, (3.5, 0), 60, textposition=&quot;outside&quot;, **kw)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">am8 = plot_angle(ax1, (5.0, 0), 60, textposition=&quot;edge&quot;,</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a><span class="sd">                 text_kw=dict(bbox=dict(boxstyle=&quot;round&quot;, fc=&quot;w&quot;)), **kw)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">am9 = plot_angle(ax1, (6.5, 0), 60, textposition=&quot;edge&quot;,</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="sd">                 text_kw=dict(xytext=(30, 20), arrowprops=dict(arrowstyle=&quot;-&gt;&quot;,</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="sd">                              connectionstyle=&quot;arc3,rad=-0.2&quot;)), **kw)</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a><span class="sd">for x, text in zip([2.0, 3.5, 5.0, 6.5], [&#39;&quot;inside&quot;&#39;, &#39;&quot;outside&quot;&#39;, &#39;&quot;edge&quot;&#39;,</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">                                          &#39;&quot;edge&quot;, custom arrow&#39;]):</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="sd">    ax1.annotate(text, xy=(x, 0), xycoords=ax1.get_xaxis_transform(),</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a><span class="sd">                 bbox=dict(boxstyle=&quot;round&quot;, fc=&quot;w&quot;), ha=&quot;left&quot;, fontsize=8,</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="sd">                 annotation_clip=True)</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd"># Showcase different size units. The effect of this can best be observed</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="sd"># by interactively changing the figure size</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">ax2.margins(y=0.4)</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a><span class="sd">ax2.set_title(&quot;unit&quot;)</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a><span class="sd">kw = dict(text=r&quot;$60$&quot;, textposition=&quot;outside&quot;)</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a><span class="sd">am10 = plot_angle(ax2, (2.0, 0), 60, size=50, unit=&quot;pixels&quot;, **kw)</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a><span class="sd">am11 = plot_angle(ax2, (3.5, 0), 60, size=50, unit=&quot;points&quot;, **kw)</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="sd">am12 = plot_angle(ax2, (5.0, 0), 60, size=0.25, unit=&quot;axes min&quot;, **kw)</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">am13 = plot_angle(ax2, (6.5, 0), 60, size=0.25, unit=&quot;axes max&quot;, **kw)</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">for x, text in zip([2.0, 3.5, 5.0, 6.5], [&#39;&quot;pixels&quot;&#39;, &#39;&quot;points&quot;&#39;,</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">                                          &#39;&quot;axes min&quot;&#39;, &#39;&quot;axes max&quot;&#39;]):</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="sd">    ax2.annotate(text, xy=(x, 0), xycoords=ax2.get_xaxis_transform(),</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">                 bbox=dict(boxstyle=&quot;round&quot;, fc=&quot;w&quot;), ha=&quot;left&quot;, fontsize=8,</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">                 annotation_clip=True)</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="sd">plt.show()</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a><span class="c1">#############################################################################</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="c1">#</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="c1"># .. admonition:: References</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="c1">#</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="c1">#    The use of the following functions, methods, classes and modules is shown</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="c1">#    in this example:</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="c1">#</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="c1">#    - `matplotlib.patches.Arc`</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="c1">#    - `matplotlib.axes.Axes.annotate` / `matplotlib.pyplot.annotate`</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="c1">#    - `matplotlib.text.Annotation`</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="c1">#    - `matplotlib.transforms.IdentityTransform`</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="c1">#    - `matplotlib.transforms.TransformedBbox`</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a><span class="c1">#    - `matplotlib.transforms.Bbox`</span>
</span></pre></div>


            </section>
                <section id="AngleAnnotation">
                            <input id="AngleAnnotation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AngleAnnotation</span><wbr>(<span class="base">matplotlib.patches.Arc</span>):

                <label class="view-source-button" for="AngleAnnotation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation-66"><a href="#AngleAnnotation-66"><span class="linenos"> 66</span></a><span class="k">class</span> <span class="nc">AngleAnnotation</span><span class="p">(</span><span class="n">Arc</span><span class="p">):</span>
</span><span id="AngleAnnotation-67"><a href="#AngleAnnotation-67"><span class="linenos"> 67</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AngleAnnotation-68"><a href="#AngleAnnotation-68"><span class="linenos"> 68</span></a><span class="sd">    Draws an arc between two vectors which appears circular in display space.</span>
</span><span id="AngleAnnotation-69"><a href="#AngleAnnotation-69"><span class="linenos"> 69</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AngleAnnotation-70"><a href="#AngleAnnotation-70"><span class="linenos"> 70</span></a>
</span><span id="AngleAnnotation-71"><a href="#AngleAnnotation-71"><span class="linenos"> 71</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="AngleAnnotation-72"><a href="#AngleAnnotation-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AngleAnnotation-73"><a href="#AngleAnnotation-73"><span class="linenos"> 73</span></a>        <span class="n">xy</span><span class="p">,</span>
</span><span id="AngleAnnotation-74"><a href="#AngleAnnotation-74"><span class="linenos"> 74</span></a>        <span class="n">p1</span><span class="p">,</span>
</span><span id="AngleAnnotation-75"><a href="#AngleAnnotation-75"><span class="linenos"> 75</span></a>        <span class="n">p2</span><span class="p">,</span>
</span><span id="AngleAnnotation-76"><a href="#AngleAnnotation-76"><span class="linenos"> 76</span></a>        <span class="n">size</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span>
</span><span id="AngleAnnotation-77"><a href="#AngleAnnotation-77"><span class="linenos"> 77</span></a>        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;points&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation-78"><a href="#AngleAnnotation-78"><span class="linenos"> 78</span></a>        <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="AngleAnnotation-79"><a href="#AngleAnnotation-79"><span class="linenos"> 79</span></a>        <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation-80"><a href="#AngleAnnotation-80"><span class="linenos"> 80</span></a>        <span class="n">textposition</span><span class="o">=</span><span class="s2">&quot;inside&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation-81"><a href="#AngleAnnotation-81"><span class="linenos"> 81</span></a>        <span class="n">text_kw</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="AngleAnnotation-82"><a href="#AngleAnnotation-82"><span class="linenos"> 82</span></a>        <span class="o">**</span><span class="n">kwargs</span>
</span><span id="AngleAnnotation-83"><a href="#AngleAnnotation-83"><span class="linenos"> 83</span></a>    <span class="p">):</span>
</span><span id="AngleAnnotation-84"><a href="#AngleAnnotation-84"><span class="linenos"> 84</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AngleAnnotation-85"><a href="#AngleAnnotation-85"><span class="linenos"> 85</span></a><span class="sd">        Parameters</span>
</span><span id="AngleAnnotation-86"><a href="#AngleAnnotation-86"><span class="linenos"> 86</span></a><span class="sd">        ----------</span>
</span><span id="AngleAnnotation-87"><a href="#AngleAnnotation-87"><span class="linenos"> 87</span></a><span class="sd">        xy, p1, p2 : tuple or array of two floats</span>
</span><span id="AngleAnnotation-88"><a href="#AngleAnnotation-88"><span class="linenos"> 88</span></a><span class="sd">            Center position and two points. Angle annotation is drawn between</span>
</span><span id="AngleAnnotation-89"><a href="#AngleAnnotation-89"><span class="linenos"> 89</span></a><span class="sd">            the two vectors connecting *p1* and *p2* with *xy*, respectively.</span>
</span><span id="AngleAnnotation-90"><a href="#AngleAnnotation-90"><span class="linenos"> 90</span></a><span class="sd">            Units are data coordinates.</span>
</span><span id="AngleAnnotation-91"><a href="#AngleAnnotation-91"><span class="linenos"> 91</span></a>
</span><span id="AngleAnnotation-92"><a href="#AngleAnnotation-92"><span class="linenos"> 92</span></a><span class="sd">        size : float</span>
</span><span id="AngleAnnotation-93"><a href="#AngleAnnotation-93"><span class="linenos"> 93</span></a><span class="sd">            Diameter of the angle annotation in units specified by *unit*.</span>
</span><span id="AngleAnnotation-94"><a href="#AngleAnnotation-94"><span class="linenos"> 94</span></a>
</span><span id="AngleAnnotation-95"><a href="#AngleAnnotation-95"><span class="linenos"> 95</span></a><span class="sd">        unit : str</span>
</span><span id="AngleAnnotation-96"><a href="#AngleAnnotation-96"><span class="linenos"> 96</span></a><span class="sd">            One of the following strings to specify the unit of *size*:</span>
</span><span id="AngleAnnotation-97"><a href="#AngleAnnotation-97"><span class="linenos"> 97</span></a>
</span><span id="AngleAnnotation-98"><a href="#AngleAnnotation-98"><span class="linenos"> 98</span></a><span class="sd">            * &quot;pixels&quot;: pixels</span>
</span><span id="AngleAnnotation-99"><a href="#AngleAnnotation-99"><span class="linenos"> 99</span></a><span class="sd">            * &quot;points&quot;: points, use points instead of pixels to not have a</span>
</span><span id="AngleAnnotation-100"><a href="#AngleAnnotation-100"><span class="linenos">100</span></a><span class="sd">              dependence on the DPI</span>
</span><span id="AngleAnnotation-101"><a href="#AngleAnnotation-101"><span class="linenos">101</span></a><span class="sd">            * &quot;axes width&quot;, &quot;axes height&quot;: relative units of Axes width, height</span>
</span><span id="AngleAnnotation-102"><a href="#AngleAnnotation-102"><span class="linenos">102</span></a><span class="sd">            * &quot;axes min&quot;, &quot;axes max&quot;: minimum or maximum of relative Axes</span>
</span><span id="AngleAnnotation-103"><a href="#AngleAnnotation-103"><span class="linenos">103</span></a><span class="sd">              width, height</span>
</span><span id="AngleAnnotation-104"><a href="#AngleAnnotation-104"><span class="linenos">104</span></a>
</span><span id="AngleAnnotation-105"><a href="#AngleAnnotation-105"><span class="linenos">105</span></a><span class="sd">        ax : `matplotlib.axes.Axes`</span>
</span><span id="AngleAnnotation-106"><a href="#AngleAnnotation-106"><span class="linenos">106</span></a><span class="sd">            The Axes to add the angle annotation to.</span>
</span><span id="AngleAnnotation-107"><a href="#AngleAnnotation-107"><span class="linenos">107</span></a>
</span><span id="AngleAnnotation-108"><a href="#AngleAnnotation-108"><span class="linenos">108</span></a><span class="sd">        text : str</span>
</span><span id="AngleAnnotation-109"><a href="#AngleAnnotation-109"><span class="linenos">109</span></a><span class="sd">            The text to mark the angle with.</span>
</span><span id="AngleAnnotation-110"><a href="#AngleAnnotation-110"><span class="linenos">110</span></a>
</span><span id="AngleAnnotation-111"><a href="#AngleAnnotation-111"><span class="linenos">111</span></a><span class="sd">        textposition : {&quot;inside&quot;, &quot;outside&quot;, &quot;edge&quot;}</span>
</span><span id="AngleAnnotation-112"><a href="#AngleAnnotation-112"><span class="linenos">112</span></a><span class="sd">            Whether to show the text in- or outside the arc. &quot;edge&quot; can be used</span>
</span><span id="AngleAnnotation-113"><a href="#AngleAnnotation-113"><span class="linenos">113</span></a><span class="sd">            for custom positions anchored at the arc&#39;s edge.</span>
</span><span id="AngleAnnotation-114"><a href="#AngleAnnotation-114"><span class="linenos">114</span></a>
</span><span id="AngleAnnotation-115"><a href="#AngleAnnotation-115"><span class="linenos">115</span></a><span class="sd">        text_kw : dict</span>
</span><span id="AngleAnnotation-116"><a href="#AngleAnnotation-116"><span class="linenos">116</span></a><span class="sd">            Dictionary of arguments passed to the Annotation.</span>
</span><span id="AngleAnnotation-117"><a href="#AngleAnnotation-117"><span class="linenos">117</span></a>
</span><span id="AngleAnnotation-118"><a href="#AngleAnnotation-118"><span class="linenos">118</span></a><span class="sd">        **kwargs</span>
</span><span id="AngleAnnotation-119"><a href="#AngleAnnotation-119"><span class="linenos">119</span></a><span class="sd">            Further parameters are passed to `matplotlib.patches.Arc`. Use this</span>
</span><span id="AngleAnnotation-120"><a href="#AngleAnnotation-120"><span class="linenos">120</span></a><span class="sd">            to specify, color, linewidth etc. of the arc.</span>
</span><span id="AngleAnnotation-121"><a href="#AngleAnnotation-121"><span class="linenos">121</span></a>
</span><span id="AngleAnnotation-122"><a href="#AngleAnnotation-122"><span class="linenos">122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AngleAnnotation-123"><a href="#AngleAnnotation-123"><span class="linenos">123</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span> <span class="ow">or</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
</span><span id="AngleAnnotation-124"><a href="#AngleAnnotation-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span> <span class="o">=</span> <span class="n">xy</span>  <span class="c1"># in data coordinates</span>
</span><span id="AngleAnnotation-125"><a href="#AngleAnnotation-125"><span class="linenos">125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vec1</span> <span class="o">=</span> <span class="n">p1</span>
</span><span id="AngleAnnotation-126"><a href="#AngleAnnotation-126"><span class="linenos">126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vec2</span> <span class="o">=</span> <span class="n">p2</span>
</span><span id="AngleAnnotation-127"><a href="#AngleAnnotation-127"><span class="linenos">127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="AngleAnnotation-128"><a href="#AngleAnnotation-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
</span><span id="AngleAnnotation-129"><a href="#AngleAnnotation-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">=</span> <span class="n">textposition</span>
</span><span id="AngleAnnotation-130"><a href="#AngleAnnotation-130"><span class="linenos">130</span></a>
</span><span id="AngleAnnotation-131"><a href="#AngleAnnotation-131"><span class="linenos">131</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="AngleAnnotation-132"><a href="#AngleAnnotation-132"><span class="linenos">132</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span><span class="p">,</span>
</span><span id="AngleAnnotation-133"><a href="#AngleAnnotation-133"><span class="linenos">133</span></a>            <span class="n">size</span><span class="p">,</span>
</span><span id="AngleAnnotation-134"><a href="#AngleAnnotation-134"><span class="linenos">134</span></a>            <span class="n">size</span><span class="p">,</span>
</span><span id="AngleAnnotation-135"><a href="#AngleAnnotation-135"><span class="linenos">135</span></a>            <span class="n">angle</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="AngleAnnotation-136"><a href="#AngleAnnotation-136"><span class="linenos">136</span></a>            <span class="n">theta1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">theta1</span><span class="p">,</span>
</span><span id="AngleAnnotation-137"><a href="#AngleAnnotation-137"><span class="linenos">137</span></a>            <span class="n">theta2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">theta2</span><span class="p">,</span>
</span><span id="AngleAnnotation-138"><a href="#AngleAnnotation-138"><span class="linenos">138</span></a>            <span class="o">**</span><span class="n">kwargs</span>
</span><span id="AngleAnnotation-139"><a href="#AngleAnnotation-139"><span class="linenos">139</span></a>        <span class="p">)</span>
</span><span id="AngleAnnotation-140"><a href="#AngleAnnotation-140"><span class="linenos">140</span></a>
</span><span id="AngleAnnotation-141"><a href="#AngleAnnotation-141"><span class="linenos">141</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">IdentityTransform</span><span class="p">())</span>
</span><span id="AngleAnnotation-142"><a href="#AngleAnnotation-142"><span class="linenos">142</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AngleAnnotation-143"><a href="#AngleAnnotation-143"><span class="linenos">143</span></a>
</span><span id="AngleAnnotation-144"><a href="#AngleAnnotation-144"><span class="linenos">144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
</span><span id="AngleAnnotation-145"><a href="#AngleAnnotation-145"><span class="linenos">145</span></a>            <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation-146"><a href="#AngleAnnotation-146"><span class="linenos">146</span></a>            <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation-147"><a href="#AngleAnnotation-147"><span class="linenos">147</span></a>            <span class="n">xycoords</span><span class="o">=</span><span class="n">IdentityTransform</span><span class="p">(),</span>
</span><span id="AngleAnnotation-148"><a href="#AngleAnnotation-148"><span class="linenos">148</span></a>            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="AngleAnnotation-149"><a href="#AngleAnnotation-149"><span class="linenos">149</span></a>            <span class="n">textcoords</span><span class="o">=</span><span class="s2">&quot;offset points&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation-150"><a href="#AngleAnnotation-150"><span class="linenos">150</span></a>            <span class="n">annotation_clip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="AngleAnnotation-151"><a href="#AngleAnnotation-151"><span class="linenos">151</span></a>        <span class="p">)</span>
</span><span id="AngleAnnotation-152"><a href="#AngleAnnotation-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kw</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">text_kw</span> <span class="ow">or</span> <span class="p">{})</span>
</span><span id="AngleAnnotation-153"><a href="#AngleAnnotation-153"><span class="linenos">153</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_center</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kw</span><span class="p">)</span>
</span><span id="AngleAnnotation-154"><a href="#AngleAnnotation-154"><span class="linenos">154</span></a>
</span><span id="AngleAnnotation-155"><a href="#AngleAnnotation-155"><span class="linenos">155</span></a>    <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation-156"><a href="#AngleAnnotation-156"><span class="linenos">156</span></a>        <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="AngleAnnotation-157"><a href="#AngleAnnotation-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;points&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation-158"><a href="#AngleAnnotation-158"><span class="linenos">158</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">/</span> <span class="mf">72.0</span>
</span><span id="AngleAnnotation-159"><a href="#AngleAnnotation-159"><span class="linenos">159</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;axes&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation-160"><a href="#AngleAnnotation-160"><span class="linenos">160</span></a>            <span class="n">b</span> <span class="o">=</span> <span class="n">TransformedBbox</span><span class="p">(</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
</span><span id="AngleAnnotation-161"><a href="#AngleAnnotation-161"><span class="linenos">161</span></a>            <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AngleAnnotation-162"><a href="#AngleAnnotation-162"><span class="linenos">162</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="AngleAnnotation-163"><a href="#AngleAnnotation-163"><span class="linenos">163</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="AngleAnnotation-164"><a href="#AngleAnnotation-164"><span class="linenos">164</span></a>                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
</span><span id="AngleAnnotation-165"><a href="#AngleAnnotation-165"><span class="linenos">165</span></a>                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
</span><span id="AngleAnnotation-166"><a href="#AngleAnnotation-166"><span class="linenos">166</span></a>            <span class="p">}</span>
</span><span id="AngleAnnotation-167"><a href="#AngleAnnotation-167"><span class="linenos">167</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="n">dic</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[</span><span class="mi">5</span><span class="p">:]]</span>
</span><span id="AngleAnnotation-168"><a href="#AngleAnnotation-168"><span class="linenos">168</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">*</span> <span class="n">factor</span>
</span><span id="AngleAnnotation-169"><a href="#AngleAnnotation-169"><span class="linenos">169</span></a>
</span><span id="AngleAnnotation-170"><a href="#AngleAnnotation-170"><span class="linenos">170</span></a>    <span class="k">def</span> <span class="nf">set_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span id="AngleAnnotation-171"><a href="#AngleAnnotation-171"><span class="linenos">171</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="AngleAnnotation-172"><a href="#AngleAnnotation-172"><span class="linenos">172</span></a>
</span><span id="AngleAnnotation-173"><a href="#AngleAnnotation-173"><span class="linenos">173</span></a>    <span class="k">def</span> <span class="nf">get_center_in_pixels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation-174"><a href="#AngleAnnotation-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;return center in pixels&quot;&quot;&quot;</span>
</span><span id="AngleAnnotation-175"><a href="#AngleAnnotation-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span><span class="p">)</span>
</span><span id="AngleAnnotation-176"><a href="#AngleAnnotation-176"><span class="linenos">176</span></a>
</span><span id="AngleAnnotation-177"><a href="#AngleAnnotation-177"><span class="linenos">177</span></a>    <span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xy</span><span class="p">):</span>
</span><span id="AngleAnnotation-178"><a href="#AngleAnnotation-178"><span class="linenos">178</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;set center in data coordinates&quot;&quot;&quot;</span>
</span><span id="AngleAnnotation-179"><a href="#AngleAnnotation-179"><span class="linenos">179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span> <span class="o">=</span> <span class="n">xy</span>
</span><span id="AngleAnnotation-180"><a href="#AngleAnnotation-180"><span class="linenos">180</span></a>
</span><span id="AngleAnnotation-181"><a href="#AngleAnnotation-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vec</span><span class="p">):</span>
</span><span id="AngleAnnotation-182"><a href="#AngleAnnotation-182"><span class="linenos">182</span></a>        <span class="n">vec_in_pixels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center</span>
</span><span id="AngleAnnotation-183"><a href="#AngleAnnotation-183"><span class="linenos">183</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">vec_in_pixels</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vec_in_pixels</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="AngleAnnotation-184"><a href="#AngleAnnotation-184"><span class="linenos">184</span></a>
</span><span id="AngleAnnotation-185"><a href="#AngleAnnotation-185"><span class="linenos">185</span></a>    <span class="k">def</span> <span class="nf">get_theta1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation-186"><a href="#AngleAnnotation-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vec1</span><span class="p">)</span>
</span><span id="AngleAnnotation-187"><a href="#AngleAnnotation-187"><span class="linenos">187</span></a>
</span><span id="AngleAnnotation-188"><a href="#AngleAnnotation-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">get_theta2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation-189"><a href="#AngleAnnotation-189"><span class="linenos">189</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vec2</span><span class="p">)</span>
</span><span id="AngleAnnotation-190"><a href="#AngleAnnotation-190"><span class="linenos">190</span></a>
</span><span id="AngleAnnotation-191"><a href="#AngleAnnotation-191"><span class="linenos">191</span></a>    <span class="k">def</span> <span class="nf">set_theta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="AngleAnnotation-192"><a href="#AngleAnnotation-192"><span class="linenos">192</span></a>        <span class="k">pass</span>
</span><span id="AngleAnnotation-193"><a href="#AngleAnnotation-193"><span class="linenos">193</span></a>
</span><span id="AngleAnnotation-194"><a href="#AngleAnnotation-194"><span class="linenos">194</span></a>    <span class="c1"># Redefine attributes of the Arc to always give values in pixel space</span>
</span><span id="AngleAnnotation-195"><a href="#AngleAnnotation-195"><span class="linenos">195</span></a>    <span class="n">_center</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_center_in_pixels</span><span class="p">,</span> <span class="n">set_center</span><span class="p">)</span>
</span><span id="AngleAnnotation-196"><a href="#AngleAnnotation-196"><span class="linenos">196</span></a>    <span class="n">theta1</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_theta1</span><span class="p">,</span> <span class="n">set_theta</span><span class="p">)</span>
</span><span id="AngleAnnotation-197"><a href="#AngleAnnotation-197"><span class="linenos">197</span></a>    <span class="n">theta2</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_theta2</span><span class="p">,</span> <span class="n">set_theta</span><span class="p">)</span>
</span><span id="AngleAnnotation-198"><a href="#AngleAnnotation-198"><span class="linenos">198</span></a>    <span class="n">width</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_size</span><span class="p">,</span> <span class="n">set_size</span><span class="p">)</span>
</span><span id="AngleAnnotation-199"><a href="#AngleAnnotation-199"><span class="linenos">199</span></a>    <span class="n">height</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_size</span><span class="p">,</span> <span class="n">set_size</span><span class="p">)</span>
</span><span id="AngleAnnotation-200"><a href="#AngleAnnotation-200"><span class="linenos">200</span></a>
</span><span id="AngleAnnotation-201"><a href="#AngleAnnotation-201"><span class="linenos">201</span></a>    <span class="c1"># The following two methods are needed to update the text position.</span>
</span><span id="AngleAnnotation-202"><a href="#AngleAnnotation-202"><span class="linenos">202</span></a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
</span><span id="AngleAnnotation-203"><a href="#AngleAnnotation-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_text</span><span class="p">()</span>
</span><span id="AngleAnnotation-204"><a href="#AngleAnnotation-204"><span class="linenos">204</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
</span><span id="AngleAnnotation-205"><a href="#AngleAnnotation-205"><span class="linenos">205</span></a>
</span><span id="AngleAnnotation-206"><a href="#AngleAnnotation-206"><span class="linenos">206</span></a>    <span class="k">def</span> <span class="nf">update_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation-207"><a href="#AngleAnnotation-207"><span class="linenos">207</span></a>        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center</span>
</span><span id="AngleAnnotation-208"><a href="#AngleAnnotation-208"><span class="linenos">208</span></a>        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="AngleAnnotation-209"><a href="#AngleAnnotation-209"><span class="linenos">209</span></a>        <span class="n">angle_span</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>
</span><span id="AngleAnnotation-210"><a href="#AngleAnnotation-210"><span class="linenos">210</span></a>        <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta1</span> <span class="o">+</span> <span class="n">angle_span</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AngleAnnotation-211"><a href="#AngleAnnotation-211"><span class="linenos">211</span></a>        <span class="n">r</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="AngleAnnotation-212"><a href="#AngleAnnotation-212"><span class="linenos">212</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">==</span> <span class="s2">&quot;inside&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation-213"><a href="#AngleAnnotation-213"><span class="linenos">213</span></a>            <span class="n">r</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">angle_span</span><span class="p">,</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">3.8</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span id="AngleAnnotation-214"><a href="#AngleAnnotation-214"><span class="linenos">214</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)])</span>
</span><span id="AngleAnnotation-215"><a href="#AngleAnnotation-215"><span class="linenos">215</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">==</span> <span class="s2">&quot;outside&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation-216"><a href="#AngleAnnotation-216"><span class="linenos">216</span></a>
</span><span id="AngleAnnotation-217"><a href="#AngleAnnotation-217"><span class="linenos">217</span></a>            <span class="k">def</span> <span class="nf">R90</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
</span><span id="AngleAnnotation-218"><a href="#AngleAnnotation-218"><span class="linenos">218</span></a>                <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)):</span>
</span><span id="AngleAnnotation-219"><a href="#AngleAnnotation-219"><span class="linenos">219</span></a>                    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AngleAnnotation-220"><a href="#AngleAnnotation-220"><span class="linenos">220</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="AngleAnnotation-221"><a href="#AngleAnnotation-221"><span class="linenos">221</span></a>                    <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AngleAnnotation-222"><a href="#AngleAnnotation-222"><span class="linenos">222</span></a>                    <span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">a</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">c</span><span class="p">))</span> <span class="o">/</span> <span class="n">r</span><span class="p">)</span>
</span><span id="AngleAnnotation-223"><a href="#AngleAnnotation-223"><span class="linenos">223</span></a>                    <span class="n">xy</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">T</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">T</span><span class="p">)])</span>
</span><span id="AngleAnnotation-224"><a href="#AngleAnnotation-224"><span class="linenos">224</span></a>                    <span class="n">xy</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">])</span>
</span><span id="AngleAnnotation-225"><a href="#AngleAnnotation-225"><span class="linenos">225</span></a>                    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xy</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
</span><span id="AngleAnnotation-226"><a href="#AngleAnnotation-226"><span class="linenos">226</span></a>
</span><span id="AngleAnnotation-227"><a href="#AngleAnnotation-227"><span class="linenos">227</span></a>            <span class="k">def</span> <span class="nf">R</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
</span><span id="AngleAnnotation-228"><a href="#AngleAnnotation-228"><span class="linenos">228</span></a>                <span class="n">aa</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span> <span class="o">*</span> <span class="p">((</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
</span><span id="AngleAnnotation-229"><a href="#AngleAnnotation-229"><span class="linenos">229</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span>
</span><span id="AngleAnnotation-230"><a href="#AngleAnnotation-230"><span class="linenos">230</span></a>                <span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="AngleAnnotation-231"><a href="#AngleAnnotation-231"><span class="linenos">231</span></a>                <span class="k">return</span> <span class="n">R90</span><span class="p">(</span><span class="n">aa</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">][::</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">)))])</span>
</span><span id="AngleAnnotation-232"><a href="#AngleAnnotation-232"><span class="linenos">232</span></a>
</span><span id="AngleAnnotation-233"><a href="#AngleAnnotation-233"><span class="linenos">233</span></a>            <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span>
</span><span id="AngleAnnotation-234"><a href="#AngleAnnotation-234"><span class="linenos">234</span></a>            <span class="n">X</span> <span class="o">=</span> <span class="n">R</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
</span><span id="AngleAnnotation-235"><a href="#AngleAnnotation-235"><span class="linenos">235</span></a>            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
</span><span id="AngleAnnotation-236"><a href="#AngleAnnotation-236"><span class="linenos">236</span></a>            <span class="n">offs</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform</span><span class="p">(((</span><span class="n">X</span> <span class="o">-</span> <span class="n">s</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">72</span>  <span class="c1"># !!!</span>
</span><span id="AngleAnnotation-237"><a href="#AngleAnnotation-237"><span class="linenos">237</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="n">offs</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">offs</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)])</span>
</span></pre></div>


            <div class="docstring"><p>Draws an arc between two vectors which appears circular in display space.</p>
</div>


                            <div id="AngleAnnotation.__init__" class="classattr">
                                        <input id="AngleAnnotation.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AngleAnnotation</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">xy</span>,</span><span class="param">	<span class="n">p1</span>,</span><span class="param">	<span class="n">p2</span>,</span><span class="param">	<span class="n">size</span><span class="o">=</span><span class="mi">75</span>,</span><span class="param">	<span class="n">unit</span><span class="o">=</span><span class="s1">&#39;points&#39;</span>,</span><span class="param">	<span class="n">ax</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">textposition</span><span class="o">=</span><span class="s1">&#39;inside&#39;</span>,</span><span class="param">	<span class="n">text_kw</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span>)</span>

                <label class="view-source-button" for="AngleAnnotation.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.__init__-71"><a href="#AngleAnnotation.__init__-71"><span class="linenos"> 71</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
</span><span id="AngleAnnotation.__init__-72"><a href="#AngleAnnotation.__init__-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-73"><a href="#AngleAnnotation.__init__-73"><span class="linenos"> 73</span></a>        <span class="n">xy</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-74"><a href="#AngleAnnotation.__init__-74"><span class="linenos"> 74</span></a>        <span class="n">p1</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-75"><a href="#AngleAnnotation.__init__-75"><span class="linenos"> 75</span></a>        <span class="n">p2</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-76"><a href="#AngleAnnotation.__init__-76"><span class="linenos"> 76</span></a>        <span class="n">size</span><span class="o">=</span><span class="mi">75</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-77"><a href="#AngleAnnotation.__init__-77"><span class="linenos"> 77</span></a>        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;points&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-78"><a href="#AngleAnnotation.__init__-78"><span class="linenos"> 78</span></a>        <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-79"><a href="#AngleAnnotation.__init__-79"><span class="linenos"> 79</span></a>        <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-80"><a href="#AngleAnnotation.__init__-80"><span class="linenos"> 80</span></a>        <span class="n">textposition</span><span class="o">=</span><span class="s2">&quot;inside&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-81"><a href="#AngleAnnotation.__init__-81"><span class="linenos"> 81</span></a>        <span class="n">text_kw</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-82"><a href="#AngleAnnotation.__init__-82"><span class="linenos"> 82</span></a>        <span class="o">**</span><span class="n">kwargs</span>
</span><span id="AngleAnnotation.__init__-83"><a href="#AngleAnnotation.__init__-83"><span class="linenos"> 83</span></a>    <span class="p">):</span>
</span><span id="AngleAnnotation.__init__-84"><a href="#AngleAnnotation.__init__-84"><span class="linenos"> 84</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AngleAnnotation.__init__-85"><a href="#AngleAnnotation.__init__-85"><span class="linenos"> 85</span></a><span class="sd">        Parameters</span>
</span><span id="AngleAnnotation.__init__-86"><a href="#AngleAnnotation.__init__-86"><span class="linenos"> 86</span></a><span class="sd">        ----------</span>
</span><span id="AngleAnnotation.__init__-87"><a href="#AngleAnnotation.__init__-87"><span class="linenos"> 87</span></a><span class="sd">        xy, p1, p2 : tuple or array of two floats</span>
</span><span id="AngleAnnotation.__init__-88"><a href="#AngleAnnotation.__init__-88"><span class="linenos"> 88</span></a><span class="sd">            Center position and two points. Angle annotation is drawn between</span>
</span><span id="AngleAnnotation.__init__-89"><a href="#AngleAnnotation.__init__-89"><span class="linenos"> 89</span></a><span class="sd">            the two vectors connecting *p1* and *p2* with *xy*, respectively.</span>
</span><span id="AngleAnnotation.__init__-90"><a href="#AngleAnnotation.__init__-90"><span class="linenos"> 90</span></a><span class="sd">            Units are data coordinates.</span>
</span><span id="AngleAnnotation.__init__-91"><a href="#AngleAnnotation.__init__-91"><span class="linenos"> 91</span></a>
</span><span id="AngleAnnotation.__init__-92"><a href="#AngleAnnotation.__init__-92"><span class="linenos"> 92</span></a><span class="sd">        size : float</span>
</span><span id="AngleAnnotation.__init__-93"><a href="#AngleAnnotation.__init__-93"><span class="linenos"> 93</span></a><span class="sd">            Diameter of the angle annotation in units specified by *unit*.</span>
</span><span id="AngleAnnotation.__init__-94"><a href="#AngleAnnotation.__init__-94"><span class="linenos"> 94</span></a>
</span><span id="AngleAnnotation.__init__-95"><a href="#AngleAnnotation.__init__-95"><span class="linenos"> 95</span></a><span class="sd">        unit : str</span>
</span><span id="AngleAnnotation.__init__-96"><a href="#AngleAnnotation.__init__-96"><span class="linenos"> 96</span></a><span class="sd">            One of the following strings to specify the unit of *size*:</span>
</span><span id="AngleAnnotation.__init__-97"><a href="#AngleAnnotation.__init__-97"><span class="linenos"> 97</span></a>
</span><span id="AngleAnnotation.__init__-98"><a href="#AngleAnnotation.__init__-98"><span class="linenos"> 98</span></a><span class="sd">            * &quot;pixels&quot;: pixels</span>
</span><span id="AngleAnnotation.__init__-99"><a href="#AngleAnnotation.__init__-99"><span class="linenos"> 99</span></a><span class="sd">            * &quot;points&quot;: points, use points instead of pixels to not have a</span>
</span><span id="AngleAnnotation.__init__-100"><a href="#AngleAnnotation.__init__-100"><span class="linenos">100</span></a><span class="sd">              dependence on the DPI</span>
</span><span id="AngleAnnotation.__init__-101"><a href="#AngleAnnotation.__init__-101"><span class="linenos">101</span></a><span class="sd">            * &quot;axes width&quot;, &quot;axes height&quot;: relative units of Axes width, height</span>
</span><span id="AngleAnnotation.__init__-102"><a href="#AngleAnnotation.__init__-102"><span class="linenos">102</span></a><span class="sd">            * &quot;axes min&quot;, &quot;axes max&quot;: minimum or maximum of relative Axes</span>
</span><span id="AngleAnnotation.__init__-103"><a href="#AngleAnnotation.__init__-103"><span class="linenos">103</span></a><span class="sd">              width, height</span>
</span><span id="AngleAnnotation.__init__-104"><a href="#AngleAnnotation.__init__-104"><span class="linenos">104</span></a>
</span><span id="AngleAnnotation.__init__-105"><a href="#AngleAnnotation.__init__-105"><span class="linenos">105</span></a><span class="sd">        ax : `matplotlib.axes.Axes`</span>
</span><span id="AngleAnnotation.__init__-106"><a href="#AngleAnnotation.__init__-106"><span class="linenos">106</span></a><span class="sd">            The Axes to add the angle annotation to.</span>
</span><span id="AngleAnnotation.__init__-107"><a href="#AngleAnnotation.__init__-107"><span class="linenos">107</span></a>
</span><span id="AngleAnnotation.__init__-108"><a href="#AngleAnnotation.__init__-108"><span class="linenos">108</span></a><span class="sd">        text : str</span>
</span><span id="AngleAnnotation.__init__-109"><a href="#AngleAnnotation.__init__-109"><span class="linenos">109</span></a><span class="sd">            The text to mark the angle with.</span>
</span><span id="AngleAnnotation.__init__-110"><a href="#AngleAnnotation.__init__-110"><span class="linenos">110</span></a>
</span><span id="AngleAnnotation.__init__-111"><a href="#AngleAnnotation.__init__-111"><span class="linenos">111</span></a><span class="sd">        textposition : {&quot;inside&quot;, &quot;outside&quot;, &quot;edge&quot;}</span>
</span><span id="AngleAnnotation.__init__-112"><a href="#AngleAnnotation.__init__-112"><span class="linenos">112</span></a><span class="sd">            Whether to show the text in- or outside the arc. &quot;edge&quot; can be used</span>
</span><span id="AngleAnnotation.__init__-113"><a href="#AngleAnnotation.__init__-113"><span class="linenos">113</span></a><span class="sd">            for custom positions anchored at the arc&#39;s edge.</span>
</span><span id="AngleAnnotation.__init__-114"><a href="#AngleAnnotation.__init__-114"><span class="linenos">114</span></a>
</span><span id="AngleAnnotation.__init__-115"><a href="#AngleAnnotation.__init__-115"><span class="linenos">115</span></a><span class="sd">        text_kw : dict</span>
</span><span id="AngleAnnotation.__init__-116"><a href="#AngleAnnotation.__init__-116"><span class="linenos">116</span></a><span class="sd">            Dictionary of arguments passed to the Annotation.</span>
</span><span id="AngleAnnotation.__init__-117"><a href="#AngleAnnotation.__init__-117"><span class="linenos">117</span></a>
</span><span id="AngleAnnotation.__init__-118"><a href="#AngleAnnotation.__init__-118"><span class="linenos">118</span></a><span class="sd">        **kwargs</span>
</span><span id="AngleAnnotation.__init__-119"><a href="#AngleAnnotation.__init__-119"><span class="linenos">119</span></a><span class="sd">            Further parameters are passed to `matplotlib.patches.Arc`. Use this</span>
</span><span id="AngleAnnotation.__init__-120"><a href="#AngleAnnotation.__init__-120"><span class="linenos">120</span></a><span class="sd">            to specify, color, linewidth etc. of the arc.</span>
</span><span id="AngleAnnotation.__init__-121"><a href="#AngleAnnotation.__init__-121"><span class="linenos">121</span></a>
</span><span id="AngleAnnotation.__init__-122"><a href="#AngleAnnotation.__init__-122"><span class="linenos">122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AngleAnnotation.__init__-123"><a href="#AngleAnnotation.__init__-123"><span class="linenos">123</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span> <span class="o">=</span> <span class="n">ax</span> <span class="ow">or</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
</span><span id="AngleAnnotation.__init__-124"><a href="#AngleAnnotation.__init__-124"><span class="linenos">124</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span> <span class="o">=</span> <span class="n">xy</span>  <span class="c1"># in data coordinates</span>
</span><span id="AngleAnnotation.__init__-125"><a href="#AngleAnnotation.__init__-125"><span class="linenos">125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vec1</span> <span class="o">=</span> <span class="n">p1</span>
</span><span id="AngleAnnotation.__init__-126"><a href="#AngleAnnotation.__init__-126"><span class="linenos">126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">vec2</span> <span class="o">=</span> <span class="n">p2</span>
</span><span id="AngleAnnotation.__init__-127"><a href="#AngleAnnotation.__init__-127"><span class="linenos">127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span><span id="AngleAnnotation.__init__-128"><a href="#AngleAnnotation.__init__-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">=</span> <span class="n">unit</span>
</span><span id="AngleAnnotation.__init__-129"><a href="#AngleAnnotation.__init__-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">=</span> <span class="n">textposition</span>
</span><span id="AngleAnnotation.__init__-130"><a href="#AngleAnnotation.__init__-130"><span class="linenos">130</span></a>
</span><span id="AngleAnnotation.__init__-131"><a href="#AngleAnnotation.__init__-131"><span class="linenos">131</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
</span><span id="AngleAnnotation.__init__-132"><a href="#AngleAnnotation.__init__-132"><span class="linenos">132</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-133"><a href="#AngleAnnotation.__init__-133"><span class="linenos">133</span></a>            <span class="n">size</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-134"><a href="#AngleAnnotation.__init__-134"><span class="linenos">134</span></a>            <span class="n">size</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-135"><a href="#AngleAnnotation.__init__-135"><span class="linenos">135</span></a>            <span class="n">angle</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-136"><a href="#AngleAnnotation.__init__-136"><span class="linenos">136</span></a>            <span class="n">theta1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">theta1</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-137"><a href="#AngleAnnotation.__init__-137"><span class="linenos">137</span></a>            <span class="n">theta2</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">theta2</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-138"><a href="#AngleAnnotation.__init__-138"><span class="linenos">138</span></a>            <span class="o">**</span><span class="n">kwargs</span>
</span><span id="AngleAnnotation.__init__-139"><a href="#AngleAnnotation.__init__-139"><span class="linenos">139</span></a>        <span class="p">)</span>
</span><span id="AngleAnnotation.__init__-140"><a href="#AngleAnnotation.__init__-140"><span class="linenos">140</span></a>
</span><span id="AngleAnnotation.__init__-141"><a href="#AngleAnnotation.__init__-141"><span class="linenos">141</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_transform</span><span class="p">(</span><span class="n">IdentityTransform</span><span class="p">())</span>
</span><span id="AngleAnnotation.__init__-142"><a href="#AngleAnnotation.__init__-142"><span class="linenos">142</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AngleAnnotation.__init__-143"><a href="#AngleAnnotation.__init__-143"><span class="linenos">143</span></a>
</span><span id="AngleAnnotation.__init__-144"><a href="#AngleAnnotation.__init__-144"><span class="linenos">144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kw</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
</span><span id="AngleAnnotation.__init__-145"><a href="#AngleAnnotation.__init__-145"><span class="linenos">145</span></a>            <span class="n">ha</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-146"><a href="#AngleAnnotation.__init__-146"><span class="linenos">146</span></a>            <span class="n">va</span><span class="o">=</span><span class="s2">&quot;center&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-147"><a href="#AngleAnnotation.__init__-147"><span class="linenos">147</span></a>            <span class="n">xycoords</span><span class="o">=</span><span class="n">IdentityTransform</span><span class="p">(),</span>
</span><span id="AngleAnnotation.__init__-148"><a href="#AngleAnnotation.__init__-148"><span class="linenos">148</span></a>            <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
</span><span id="AngleAnnotation.__init__-149"><a href="#AngleAnnotation.__init__-149"><span class="linenos">149</span></a>            <span class="n">textcoords</span><span class="o">=</span><span class="s2">&quot;offset points&quot;</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-150"><a href="#AngleAnnotation.__init__-150"><span class="linenos">150</span></a>            <span class="n">annotation_clip</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="AngleAnnotation.__init__-151"><a href="#AngleAnnotation.__init__-151"><span class="linenos">151</span></a>        <span class="p">)</span>
</span><span id="AngleAnnotation.__init__-152"><a href="#AngleAnnotation.__init__-152"><span class="linenos">152</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">kw</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">text_kw</span> <span class="ow">or</span> <span class="p">{})</span>
</span><span id="AngleAnnotation.__init__-153"><a href="#AngleAnnotation.__init__-153"><span class="linenos">153</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">xy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_center</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">kw</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><h2 id="parameters">Parameters</h2>

<p>xy, p1, p2 : tuple or array of two floats
    Center position and two points. Angle annotation is drawn between
    the two vectors connecting <em>p1</em> and <em>p2</em> with <em>xy</em>, respectively.
    Units are data coordinates.</p>

<p>size : float
    Diameter of the angle annotation in units specified by <em>unit</em>.</p>

<p>unit : str
    One of the following strings to specify the unit of <em>size</em>:</p>

<pre><code>* "pixels": pixels
* "points": points, use points instead of pixels to not have a
  dependence on the DPI
* "axes width", "axes height": relative units of Axes width, height
* "axes min", "axes max": minimum or maximum of relative Axes
  width, height
</code></pre>

<p>ax : <code>matplotlib.axes.Axes</code>
    The Axes to add the angle annotation to.</p>

<p>text : str
    The text to mark the angle with.</p>

<p>textposition : {"inside", "outside", "edge"}
    Whether to show the text in- or outside the arc. "edge" can be used
    for custom positions anchored at the arc's edge.</p>

<p>text_kw : dict
    Dictionary of arguments passed to the Annotation.</p>

<p>**kwargs
    Further parameters are passed to <code>matplotlib.patches.Arc</code>. Use this
    to specify, color, linewidth etc. of the arc.</p>
</div>


                            </div>
                            <div id="AngleAnnotation.ax" class="classattr">
                                <div class="attr variable">
            <span class="name">ax</span>

        
    </div>
    <a class="headerlink" href="#AngleAnnotation.ax"></a>
    
    

                            </div>
                            <div id="AngleAnnotation.vec1" class="classattr">
                                <div class="attr variable">
            <span class="name">vec1</span>

        
    </div>
    <a class="headerlink" href="#AngleAnnotation.vec1"></a>
    
    

                            </div>
                            <div id="AngleAnnotation.vec2" class="classattr">
                                <div class="attr variable">
            <span class="name">vec2</span>

        
    </div>
    <a class="headerlink" href="#AngleAnnotation.vec2"></a>
    
    

                            </div>
                            <div id="AngleAnnotation.size" class="classattr">
                                <div class="attr variable">
            <span class="name">size</span>

        
    </div>
    <a class="headerlink" href="#AngleAnnotation.size"></a>
    
    

                            </div>
                            <div id="AngleAnnotation.unit" class="classattr">
                                <div class="attr variable">
            <span class="name">unit</span>

        
    </div>
    <a class="headerlink" href="#AngleAnnotation.unit"></a>
    
    

                            </div>
                            <div id="AngleAnnotation.textposition" class="classattr">
                                <div class="attr variable">
            <span class="name">textposition</span>

        
    </div>
    <a class="headerlink" href="#AngleAnnotation.textposition"></a>
    
    

                            </div>
                            <div id="AngleAnnotation.kw" class="classattr">
                                <div class="attr variable">
            <span class="name">kw</span>

        
    </div>
    <a class="headerlink" href="#AngleAnnotation.kw"></a>
    
    

                            </div>
                            <div id="AngleAnnotation.text" class="classattr">
                                <div class="attr variable">
            <span class="name">text</span>

        
    </div>
    <a class="headerlink" href="#AngleAnnotation.text"></a>
    
    

                            </div>
                            <div id="AngleAnnotation.get_size" class="classattr">
                                        <input id="AngleAnnotation.get_size-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_size</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.get_size-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.get_size"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.get_size-155"><a href="#AngleAnnotation.get_size-155"><span class="linenos">155</span></a>    <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.get_size-156"><a href="#AngleAnnotation.get_size-156"><span class="linenos">156</span></a>        <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="AngleAnnotation.get_size-157"><a href="#AngleAnnotation.get_size-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;points&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation.get_size-158"><a href="#AngleAnnotation.get_size-158"><span class="linenos">158</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">/</span> <span class="mf">72.0</span>
</span><span id="AngleAnnotation.get_size-159"><a href="#AngleAnnotation.get_size-159"><span class="linenos">159</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;axes&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation.get_size-160"><a href="#AngleAnnotation.get_size-160"><span class="linenos">160</span></a>            <span class="n">b</span> <span class="o">=</span> <span class="n">TransformedBbox</span><span class="p">(</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
</span><span id="AngleAnnotation.get_size-161"><a href="#AngleAnnotation.get_size-161"><span class="linenos">161</span></a>            <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AngleAnnotation.get_size-162"><a href="#AngleAnnotation.get_size-162"><span class="linenos">162</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="AngleAnnotation.get_size-163"><a href="#AngleAnnotation.get_size-163"><span class="linenos">163</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="AngleAnnotation.get_size-164"><a href="#AngleAnnotation.get_size-164"><span class="linenos">164</span></a>                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
</span><span id="AngleAnnotation.get_size-165"><a href="#AngleAnnotation.get_size-165"><span class="linenos">165</span></a>                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
</span><span id="AngleAnnotation.get_size-166"><a href="#AngleAnnotation.get_size-166"><span class="linenos">166</span></a>            <span class="p">}</span>
</span><span id="AngleAnnotation.get_size-167"><a href="#AngleAnnotation.get_size-167"><span class="linenos">167</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="n">dic</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[</span><span class="mi">5</span><span class="p">:]]</span>
</span><span id="AngleAnnotation.get_size-168"><a href="#AngleAnnotation.get_size-168"><span class="linenos">168</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">*</span> <span class="n">factor</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.set_size" class="classattr">
                                        <input id="AngleAnnotation.set_size-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_size</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">size</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.set_size-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.set_size"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.set_size-170"><a href="#AngleAnnotation.set_size-170"><span class="linenos">170</span></a>    <span class="k">def</span> <span class="nf">set_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
</span><span id="AngleAnnotation.set_size-171"><a href="#AngleAnnotation.set_size-171"><span class="linenos">171</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.get_center_in_pixels" class="classattr">
                                        <input id="AngleAnnotation.get_center_in_pixels-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_center_in_pixels</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.get_center_in_pixels-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.get_center_in_pixels"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.get_center_in_pixels-173"><a href="#AngleAnnotation.get_center_in_pixels-173"><span class="linenos">173</span></a>    <span class="k">def</span> <span class="nf">get_center_in_pixels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.get_center_in_pixels-174"><a href="#AngleAnnotation.get_center_in_pixels-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;return center in pixels&quot;&quot;&quot;</span>
</span><span id="AngleAnnotation.get_center_in_pixels-175"><a href="#AngleAnnotation.get_center_in_pixels-175"><span class="linenos">175</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>return center in pixels</p>
</div>


                            </div>
                            <div id="AngleAnnotation.set_center" class="classattr">
                                        <input id="AngleAnnotation.set_center-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_center</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">xy</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.set_center-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.set_center"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.set_center-177"><a href="#AngleAnnotation.set_center-177"><span class="linenos">177</span></a>    <span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xy</span><span class="p">):</span>
</span><span id="AngleAnnotation.set_center-178"><a href="#AngleAnnotation.set_center-178"><span class="linenos">178</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;set center in data coordinates&quot;&quot;&quot;</span>
</span><span id="AngleAnnotation.set_center-179"><a href="#AngleAnnotation.set_center-179"><span class="linenos">179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_xydata</span> <span class="o">=</span> <span class="n">xy</span>
</span></pre></div>


            <div class="docstring"><p>set center in data coordinates</p>
</div>


                            </div>
                            <div id="AngleAnnotation.get_theta" class="classattr">
                                        <input id="AngleAnnotation.get_theta-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_theta</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">vec</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.get_theta-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.get_theta"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.get_theta-181"><a href="#AngleAnnotation.get_theta-181"><span class="linenos">181</span></a>    <span class="k">def</span> <span class="nf">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vec</span><span class="p">):</span>
</span><span id="AngleAnnotation.get_theta-182"><a href="#AngleAnnotation.get_theta-182"><span class="linenos">182</span></a>        <span class="n">vec_in_pixels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transData</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">vec</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center</span>
</span><span id="AngleAnnotation.get_theta-183"><a href="#AngleAnnotation.get_theta-183"><span class="linenos">183</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">rad2deg</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">vec_in_pixels</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vec_in_pixels</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.get_theta1" class="classattr">
                                        <input id="AngleAnnotation.get_theta1-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_theta1</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.get_theta1-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.get_theta1"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.get_theta1-185"><a href="#AngleAnnotation.get_theta1-185"><span class="linenos">185</span></a>    <span class="k">def</span> <span class="nf">get_theta1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.get_theta1-186"><a href="#AngleAnnotation.get_theta1-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vec1</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.get_theta2" class="classattr">
                                        <input id="AngleAnnotation.get_theta2-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_theta2</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.get_theta2-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.get_theta2"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.get_theta2-188"><a href="#AngleAnnotation.get_theta2-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">get_theta2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.get_theta2-189"><a href="#AngleAnnotation.get_theta2-189"><span class="linenos">189</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vec2</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.set_theta" class="classattr">
                                        <input id="AngleAnnotation.set_theta-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_theta</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">angle</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.set_theta-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.set_theta"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.set_theta-191"><a href="#AngleAnnotation.set_theta-191"><span class="linenos">191</span></a>    <span class="k">def</span> <span class="nf">set_theta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="AngleAnnotation.set_theta-192"><a href="#AngleAnnotation.set_theta-192"><span class="linenos">192</span></a>        <span class="k">pass</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.theta1" class="classattr">
                                        <input id="AngleAnnotation.theta1-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">theta1</span>

                <label class="view-source-button" for="AngleAnnotation.theta1-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.theta1"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.theta1-185"><a href="#AngleAnnotation.theta1-185"><span class="linenos">185</span></a>    <span class="k">def</span> <span class="nf">get_theta1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.theta1-186"><a href="#AngleAnnotation.theta1-186"><span class="linenos">186</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vec1</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.theta2" class="classattr">
                                        <input id="AngleAnnotation.theta2-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">theta2</span>

                <label class="view-source-button" for="AngleAnnotation.theta2-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.theta2"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.theta2-188"><a href="#AngleAnnotation.theta2-188"><span class="linenos">188</span></a>    <span class="k">def</span> <span class="nf">get_theta2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.theta2-189"><a href="#AngleAnnotation.theta2-189"><span class="linenos">189</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_theta</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vec2</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.width" class="classattr">
                                        <input id="AngleAnnotation.width-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">width</span>

                <label class="view-source-button" for="AngleAnnotation.width-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.width"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.width-155"><a href="#AngleAnnotation.width-155"><span class="linenos">155</span></a>    <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.width-156"><a href="#AngleAnnotation.width-156"><span class="linenos">156</span></a>        <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="AngleAnnotation.width-157"><a href="#AngleAnnotation.width-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;points&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation.width-158"><a href="#AngleAnnotation.width-158"><span class="linenos">158</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">/</span> <span class="mf">72.0</span>
</span><span id="AngleAnnotation.width-159"><a href="#AngleAnnotation.width-159"><span class="linenos">159</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;axes&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation.width-160"><a href="#AngleAnnotation.width-160"><span class="linenos">160</span></a>            <span class="n">b</span> <span class="o">=</span> <span class="n">TransformedBbox</span><span class="p">(</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
</span><span id="AngleAnnotation.width-161"><a href="#AngleAnnotation.width-161"><span class="linenos">161</span></a>            <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AngleAnnotation.width-162"><a href="#AngleAnnotation.width-162"><span class="linenos">162</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="AngleAnnotation.width-163"><a href="#AngleAnnotation.width-163"><span class="linenos">163</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="AngleAnnotation.width-164"><a href="#AngleAnnotation.width-164"><span class="linenos">164</span></a>                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
</span><span id="AngleAnnotation.width-165"><a href="#AngleAnnotation.width-165"><span class="linenos">165</span></a>                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
</span><span id="AngleAnnotation.width-166"><a href="#AngleAnnotation.width-166"><span class="linenos">166</span></a>            <span class="p">}</span>
</span><span id="AngleAnnotation.width-167"><a href="#AngleAnnotation.width-167"><span class="linenos">167</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="n">dic</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[</span><span class="mi">5</span><span class="p">:]]</span>
</span><span id="AngleAnnotation.width-168"><a href="#AngleAnnotation.width-168"><span class="linenos">168</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">*</span> <span class="n">factor</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.height" class="classattr">
                                        <input id="AngleAnnotation.height-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">height</span>

                <label class="view-source-button" for="AngleAnnotation.height-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.height"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.height-155"><a href="#AngleAnnotation.height-155"><span class="linenos">155</span></a>    <span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.height-156"><a href="#AngleAnnotation.height-156"><span class="linenos">156</span></a>        <span class="n">factor</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="AngleAnnotation.height-157"><a href="#AngleAnnotation.height-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span> <span class="o">==</span> <span class="s2">&quot;points&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation.height-158"><a href="#AngleAnnotation.height-158"><span class="linenos">158</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span> <span class="o">/</span> <span class="mf">72.0</span>
</span><span id="AngleAnnotation.height-159"><a href="#AngleAnnotation.height-159"><span class="linenos">159</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[:</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;axes&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation.height-160"><a href="#AngleAnnotation.height-160"><span class="linenos">160</span></a>            <span class="n">b</span> <span class="o">=</span> <span class="n">TransformedBbox</span><span class="p">(</span><span class="n">Bbox</span><span class="o">.</span><span class="n">unit</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">transAxes</span><span class="p">)</span>
</span><span id="AngleAnnotation.height-161"><a href="#AngleAnnotation.height-161"><span class="linenos">161</span></a>            <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="AngleAnnotation.height-162"><a href="#AngleAnnotation.height-162"><span class="linenos">162</span></a>                <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="AngleAnnotation.height-163"><a href="#AngleAnnotation.height-163"><span class="linenos">163</span></a>                <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
</span><span id="AngleAnnotation.height-164"><a href="#AngleAnnotation.height-164"><span class="linenos">164</span></a>                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">width</span><span class="p">,</span>
</span><span id="AngleAnnotation.height-165"><a href="#AngleAnnotation.height-165"><span class="linenos">165</span></a>                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="n">b</span><span class="o">.</span><span class="n">height</span><span class="p">,</span>
</span><span id="AngleAnnotation.height-166"><a href="#AngleAnnotation.height-166"><span class="linenos">166</span></a>            <span class="p">}</span>
</span><span id="AngleAnnotation.height-167"><a href="#AngleAnnotation.height-167"><span class="linenos">167</span></a>            <span class="n">factor</span> <span class="o">=</span> <span class="n">dic</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">unit</span><span class="p">[</span><span class="mi">5</span><span class="p">:]]</span>
</span><span id="AngleAnnotation.height-168"><a href="#AngleAnnotation.height-168"><span class="linenos">168</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">*</span> <span class="n">factor</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.draw" class="classattr">
                                        <input id="AngleAnnotation.draw-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">draw</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">renderer</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.draw-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.draw"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.draw-202"><a href="#AngleAnnotation.draw-202"><span class="linenos">202</span></a>    <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">renderer</span><span class="p">):</span>
</span><span id="AngleAnnotation.draw-203"><a href="#AngleAnnotation.draw-203"><span class="linenos">203</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_text</span><span class="p">()</span>
</span><span id="AngleAnnotation.draw-204"><a href="#AngleAnnotation.draw-204"><span class="linenos">204</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">renderer</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Draw the arc to the given <em>renderer</em>.</p>

<h2 id="notes">Notes</h2>

<p>Ellipses are normally drawn using an approximation that uses
eight cubic Bezier splines.  The error of this approximation
is 1.89818e-6, according to this unverified source:</p>

<p>Lancaster, Don.  <em>Approximating a Circle or an Ellipse Using
  Four Bezier Cubic Splines.</em></p>

<p><a href="https://www.tinaja.com/glib/ellipse4.pdf">https://www.tinaja.com/glib/ellipse4.pdf</a></p>

<p>There is a use case where very large ellipses must be drawn
with very high accuracy, and it is too expensive to render the
entire ellipse with enough segments (either splines or line
segments).  Therefore, in the case where either radius of the
ellipse is large enough that the error of the spline
approximation will be visible (greater than one pixel offset
from the ideal), a different technique is used.</p>

<p>In that case, only the visible parts of the ellipse are drawn,
with each visible arc using a fixed number of spline segments
(8).  The algorithm proceeds as follows:</p>

<ol>
<li><p>The points where the ellipse intersects the axes (or figure)
bounding box are located.  (This is done by performing an inverse
transformation on the bbox such that it is relative to the unit
circle -- this makes the intersection calculation much easier than
doing rotated ellipse intersection directly.)</p>

<p>This uses the "line intersecting a circle" algorithm from:</p>

<pre><code>Vince, John.  *Geometry for Computer Graphics: Formulae,
Examples &amp; Proofs.*  London: Springer-Verlag, 2005.
</code></pre></li>
<li><p>The angles of each of the intersection points are calculated.</p></li>
<li><p>Proceeding counterclockwise starting in the positive
x-direction, each of the visible arc-segments between the
pairs of vertices are drawn using the Bezier arc
approximation technique implemented in <code>.Path.arc</code>.</p></li>
</ol>
</div>


                            </div>
                            <div id="AngleAnnotation.update_text" class="classattr">
                                        <input id="AngleAnnotation.update_text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.update_text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.update_text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.update_text-206"><a href="#AngleAnnotation.update_text-206"><span class="linenos">206</span></a>    <span class="k">def</span> <span class="nf">update_text</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AngleAnnotation.update_text-207"><a href="#AngleAnnotation.update_text-207"><span class="linenos">207</span></a>        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_center</span>
</span><span id="AngleAnnotation.update_text-208"><a href="#AngleAnnotation.update_text-208"><span class="linenos">208</span></a>        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_size</span><span class="p">()</span>
</span><span id="AngleAnnotation.update_text-209"><a href="#AngleAnnotation.update_text-209"><span class="linenos">209</span></a>        <span class="n">angle_span</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span>
</span><span id="AngleAnnotation.update_text-210"><a href="#AngleAnnotation.update_text-210"><span class="linenos">210</span></a>        <span class="n">angle</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">theta1</span> <span class="o">+</span> <span class="n">angle_span</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AngleAnnotation.update_text-211"><a href="#AngleAnnotation.update_text-211"><span class="linenos">211</span></a>        <span class="n">r</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="AngleAnnotation.update_text-212"><a href="#AngleAnnotation.update_text-212"><span class="linenos">212</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">==</span> <span class="s2">&quot;inside&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation.update_text-213"><a href="#AngleAnnotation.update_text-213"><span class="linenos">213</span></a>            <span class="n">r</span> <span class="o">=</span> <span class="n">s</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">angle_span</span><span class="p">,</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="mi">180</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.3</span><span class="p">,</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">3.8</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</span><span id="AngleAnnotation.update_text-214"><a href="#AngleAnnotation.update_text-214"><span class="linenos">214</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">xy</span> <span class="o">=</span> <span class="n">c</span> <span class="o">+</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)])</span>
</span><span id="AngleAnnotation.update_text-215"><a href="#AngleAnnotation.update_text-215"><span class="linenos">215</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">textposition</span> <span class="o">==</span> <span class="s2">&quot;outside&quot;</span><span class="p">:</span>
</span><span id="AngleAnnotation.update_text-216"><a href="#AngleAnnotation.update_text-216"><span class="linenos">216</span></a>
</span><span id="AngleAnnotation.update_text-217"><a href="#AngleAnnotation.update_text-217"><span class="linenos">217</span></a>            <span class="k">def</span> <span class="nf">R90</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
</span><span id="AngleAnnotation.update_text-218"><a href="#AngleAnnotation.update_text-218"><span class="linenos">218</span></a>                <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)):</span>
</span><span id="AngleAnnotation.update_text-219"><a href="#AngleAnnotation.update_text-219"><span class="linenos">219</span></a>                    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">r</span> <span class="o">+</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AngleAnnotation.update_text-220"><a href="#AngleAnnotation.update_text-220"><span class="linenos">220</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="AngleAnnotation.update_text-221"><a href="#AngleAnnotation.update_text-221"><span class="linenos">221</span></a>                    <span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
</span><span id="AngleAnnotation.update_text-222"><a href="#AngleAnnotation.update_text-222"><span class="linenos">222</span></a>                    <span class="n">T</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">c</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">a</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">h</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">/</span> <span class="n">c</span><span class="p">))</span> <span class="o">/</span> <span class="n">r</span><span class="p">)</span>
</span><span id="AngleAnnotation.update_text-223"><a href="#AngleAnnotation.update_text-223"><span class="linenos">223</span></a>                    <span class="n">xy</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">T</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">T</span><span class="p">)])</span>
</span><span id="AngleAnnotation.update_text-224"><a href="#AngleAnnotation.update_text-224"><span class="linenos">224</span></a>                    <span class="n">xy</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">])</span>
</span><span id="AngleAnnotation.update_text-225"><a href="#AngleAnnotation.update_text-225"><span class="linenos">225</span></a>                    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xy</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
</span><span id="AngleAnnotation.update_text-226"><a href="#AngleAnnotation.update_text-226"><span class="linenos">226</span></a>
</span><span id="AngleAnnotation.update_text-227"><a href="#AngleAnnotation.update_text-227"><span class="linenos">227</span></a>            <span class="k">def</span> <span class="nf">R</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
</span><span id="AngleAnnotation.update_text-228"><a href="#AngleAnnotation.update_text-228"><span class="linenos">228</span></a>                <span class="n">aa</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span> <span class="o">*</span> <span class="p">((</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span>
</span><span id="AngleAnnotation.update_text-229"><a href="#AngleAnnotation.update_text-229"><span class="linenos">229</span></a>                    <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">-</span> <span class="p">(</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">))</span>
</span><span id="AngleAnnotation.update_text-230"><a href="#AngleAnnotation.update_text-230"><span class="linenos">230</span></a>                <span class="p">)</span> <span class="o">*</span> <span class="p">((</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span>
</span><span id="AngleAnnotation.update_text-231"><a href="#AngleAnnotation.update_text-231"><span class="linenos">231</span></a>                <span class="k">return</span> <span class="n">R90</span><span class="p">(</span><span class="n">aa</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">][::</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="p">)))])</span>
</span><span id="AngleAnnotation.update_text-232"><a href="#AngleAnnotation.update_text-232"><span class="linenos">232</span></a>
</span><span id="AngleAnnotation.update_text-233"><a href="#AngleAnnotation.update_text-233"><span class="linenos">233</span></a>            <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">get_window_extent</span><span class="p">()</span>
</span><span id="AngleAnnotation.update_text-234"><a href="#AngleAnnotation.update_text-234"><span class="linenos">234</span></a>            <span class="n">X</span> <span class="o">=</span> <span class="n">R</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">bbox</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
</span><span id="AngleAnnotation.update_text-235"><a href="#AngleAnnotation.update_text-235"><span class="linenos">235</span></a>            <span class="n">trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">dpi_scale_trans</span><span class="o">.</span><span class="n">inverted</span><span class="p">()</span>
</span><span id="AngleAnnotation.update_text-236"><a href="#AngleAnnotation.update_text-236"><span class="linenos">236</span></a>            <span class="n">offs</span> <span class="o">=</span> <span class="n">trans</span><span class="o">.</span><span class="n">transform</span><span class="p">(((</span><span class="n">X</span> <span class="o">-</span> <span class="n">s</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="mi">0</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">72</span>  <span class="c1"># !!!</span>
</span><span id="AngleAnnotation.update_text-237"><a href="#AngleAnnotation.update_text-237"><span class="linenos">237</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="n">offs</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span> <span class="n">offs</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)])</span>
</span></pre></div>


    

                            </div>
                            <div id="AngleAnnotation.set" class="classattr">
                                        <input id="AngleAnnotation.set-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">agg_filter</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">alpha</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">angle</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">animated</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">antialiased</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">capstyle</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">center</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">clip_box</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">clip_on</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">clip_path</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">color</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">edgecolor</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">facecolor</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">fill</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">gid</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">hatch</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">height</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">in_layout</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">joinstyle</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">label</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">linestyle</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">linewidth</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">mouseover</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">path_effects</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">picker</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">rasterized</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">size</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">sketch_params</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">snap</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">theta</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">transform</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">url</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">visible</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">width</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span>,</span><span class="param">	<span class="n">zorder</span><span class="o">=&lt;</span><span class="n">UNSET</span><span class="o">&gt;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AngleAnnotation.set-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AngleAnnotation.set"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AngleAnnotation.set-148"><a href="#AngleAnnotation.set-148"><span class="linenos">148</span></a>        <span class="bp">cls</span><span class="o">.</span><span class="n">set</span> <span class="o">=</span> <span class="k">lambda</span> <span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Artist</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set multiple properties at once.</p>

<p>Supported properties are</p>

<p>Properties:
    agg_filter: a filter function, which takes a (m, n, 3) float array and a dpi value, and returns a (m, n, 3) array and two offsets from the bottom left corner of the image
    alpha: scalar or None
    angle: float
    animated: bool
    antialiased or aa: bool or None
    capstyle: <code>.CapStyle</code> or {'butt', 'projecting', 'round'}
    center: unknown
    clip_box: <code>~matplotlib.transforms.BboxBase</code> or None
    clip_on: bool
    clip_path: Patch or (Path, Transform) or None
    color: :mpltype:<code>color</code>
    edgecolor or ec: :mpltype:<code>color</code> or None
    facecolor or fc: :mpltype:<code>color</code> or None
    figure: <code>~matplotlib.figure.Figure</code>
    fill: bool
    gid: str
    hatch: {'/', '\', '|', '-', '+', 'x', 'o', 'O', '.', '*'}
    height: float
    in_layout: bool
    joinstyle: <code>.JoinStyle</code> or {'miter', 'round', 'bevel'}
    label: object
    linestyle or ls: {'-', '--', '-.', ':', '', (offset, on-off-seq), ...}
    linewidth or lw: float or None
    mouseover: bool
    path_effects: list of <code>.AbstractPathEffect</code>
    picker: None or bool or float or callable
    rasterized: bool
    size: unknown
    sketch_params: (scale: float, length: float, randomness: float)
    snap: bool or None
    theta: unknown
    transform: <code>~matplotlib.transforms.Transform</code>
    url: str
    visible: bool
    width: float
    zorder: float</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>matplotlib.patches.Ellipse</dt>
                                <dd id="AngleAnnotation.get_path" class="function">get_path</dd>
                <dd id="AngleAnnotation.get_patch_transform" class="function">get_patch_transform</dd>
                <dd id="AngleAnnotation.get_center" class="function">get_center</dd>
                <dd id="AngleAnnotation.center" class="variable">center</dd>
                <dd id="AngleAnnotation.set_width" class="function">set_width</dd>
                <dd id="AngleAnnotation.get_width" class="function">get_width</dd>
                <dd id="AngleAnnotation.set_height" class="function">set_height</dd>
                <dd id="AngleAnnotation.get_height" class="function">get_height</dd>
                <dd id="AngleAnnotation.set_angle" class="function">set_angle</dd>
                <dd id="AngleAnnotation.get_angle" class="function">get_angle</dd>
                <dd id="AngleAnnotation.angle" class="variable">angle</dd>
                <dd id="AngleAnnotation.get_corners" class="function">get_corners</dd>
                <dd id="AngleAnnotation.get_vertices" class="function">get_vertices</dd>
                <dd id="AngleAnnotation.get_co_vertices" class="function">get_co_vertices</dd>

            </div>
            <div><dt>matplotlib.patches.Patch</dt>
                                <dd id="AngleAnnotation.zorder" class="variable">zorder</dd>
                <dd id="AngleAnnotation.get_verts" class="function">get_verts</dd>
                <dd id="AngleAnnotation.contains" class="function">contains</dd>
                <dd id="AngleAnnotation.contains_point" class="function">contains_point</dd>
                <dd id="AngleAnnotation.contains_points" class="function">contains_points</dd>
                <dd id="AngleAnnotation.update_from" class="function">update_from</dd>
                <dd id="AngleAnnotation.get_extents" class="function">get_extents</dd>
                <dd id="AngleAnnotation.get_transform" class="function">get_transform</dd>
                <dd id="AngleAnnotation.get_data_transform" class="function">get_data_transform</dd>
                <dd id="AngleAnnotation.get_antialiased" class="function">get_antialiased</dd>
                <dd id="AngleAnnotation.get_edgecolor" class="function">get_edgecolor</dd>
                <dd id="AngleAnnotation.get_facecolor" class="function">get_facecolor</dd>
                <dd id="AngleAnnotation.get_linewidth" class="function">get_linewidth</dd>
                <dd id="AngleAnnotation.get_linestyle" class="function">get_linestyle</dd>
                <dd id="AngleAnnotation.set_antialiased" class="function">set_antialiased</dd>
                <dd id="AngleAnnotation.set_edgecolor" class="function">set_edgecolor</dd>
                <dd id="AngleAnnotation.set_facecolor" class="function">set_facecolor</dd>
                <dd id="AngleAnnotation.set_color" class="function">set_color</dd>
                <dd id="AngleAnnotation.set_alpha" class="function">set_alpha</dd>
                <dd id="AngleAnnotation.set_linewidth" class="function">set_linewidth</dd>
                <dd id="AngleAnnotation.set_linestyle" class="function">set_linestyle</dd>
                <dd id="AngleAnnotation.set_fill" class="function">set_fill</dd>
                <dd id="AngleAnnotation.get_fill" class="function">get_fill</dd>
                <dd id="AngleAnnotation.fill" class="variable">fill</dd>
                <dd id="AngleAnnotation.set_capstyle" class="function">set_capstyle</dd>
                <dd id="AngleAnnotation.get_capstyle" class="function">get_capstyle</dd>
                <dd id="AngleAnnotation.set_joinstyle" class="function">set_joinstyle</dd>
                <dd id="AngleAnnotation.get_joinstyle" class="function">get_joinstyle</dd>
                <dd id="AngleAnnotation.set_hatch" class="function">set_hatch</dd>
                <dd id="AngleAnnotation.get_hatch" class="function">get_hatch</dd>
                <dd id="AngleAnnotation.get_window_extent" class="function">get_window_extent</dd>
                <dd id="AngleAnnotation.get_aa" class="function">get_aa</dd>
                <dd id="AngleAnnotation.set_aa" class="function">set_aa</dd>
                <dd id="AngleAnnotation.get_ec" class="function">get_ec</dd>
                <dd id="AngleAnnotation.set_ec" class="function">set_ec</dd>
                <dd id="AngleAnnotation.get_fc" class="function">get_fc</dd>
                <dd id="AngleAnnotation.set_fc" class="function">set_fc</dd>
                <dd id="AngleAnnotation.get_ls" class="function">get_ls</dd>
                <dd id="AngleAnnotation.set_ls" class="function">set_ls</dd>
                <dd id="AngleAnnotation.get_lw" class="function">get_lw</dd>
                <dd id="AngleAnnotation.set_lw" class="function">set_lw</dd>

            </div>
            <div><dt>matplotlib.artist.Artist</dt>
                                <dd id="AngleAnnotation.stale_callback" class="variable">stale_callback</dd>
                <dd id="AngleAnnotation.figure" class="variable">figure</dd>
                <dd id="AngleAnnotation.clipbox" class="variable">clipbox</dd>
                <dd id="AngleAnnotation.remove" class="function">remove</dd>
                <dd id="AngleAnnotation.have_units" class="function">have_units</dd>
                <dd id="AngleAnnotation.convert_xunits" class="function">convert_xunits</dd>
                <dd id="AngleAnnotation.convert_yunits" class="function">convert_yunits</dd>
                <dd id="AngleAnnotation.axes" class="variable">axes</dd>
                <dd id="AngleAnnotation.stale" class="variable">stale</dd>
                <dd id="AngleAnnotation.get_tightbbox" class="function">get_tightbbox</dd>
                <dd id="AngleAnnotation.add_callback" class="function">add_callback</dd>
                <dd id="AngleAnnotation.remove_callback" class="function">remove_callback</dd>
                <dd id="AngleAnnotation.pchanged" class="function">pchanged</dd>
                <dd id="AngleAnnotation.is_transform_set" class="function">is_transform_set</dd>
                <dd id="AngleAnnotation.set_transform" class="function">set_transform</dd>
                <dd id="AngleAnnotation.get_children" class="function">get_children</dd>
                <dd id="AngleAnnotation.pickable" class="function">pickable</dd>
                <dd id="AngleAnnotation.pick" class="function">pick</dd>
                <dd id="AngleAnnotation.set_picker" class="function">set_picker</dd>
                <dd id="AngleAnnotation.get_picker" class="function">get_picker</dd>
                <dd id="AngleAnnotation.get_url" class="function">get_url</dd>
                <dd id="AngleAnnotation.set_url" class="function">set_url</dd>
                <dd id="AngleAnnotation.get_gid" class="function">get_gid</dd>
                <dd id="AngleAnnotation.set_gid" class="function">set_gid</dd>
                <dd id="AngleAnnotation.get_snap" class="function">get_snap</dd>
                <dd id="AngleAnnotation.set_snap" class="function">set_snap</dd>
                <dd id="AngleAnnotation.get_sketch_params" class="function">get_sketch_params</dd>
                <dd id="AngleAnnotation.set_sketch_params" class="function">set_sketch_params</dd>
                <dd id="AngleAnnotation.set_path_effects" class="function">set_path_effects</dd>
                <dd id="AngleAnnotation.get_path_effects" class="function">get_path_effects</dd>
                <dd id="AngleAnnotation.get_figure" class="function">get_figure</dd>
                <dd id="AngleAnnotation.set_figure" class="function">set_figure</dd>
                <dd id="AngleAnnotation.set_clip_box" class="function">set_clip_box</dd>
                <dd id="AngleAnnotation.set_clip_path" class="function">set_clip_path</dd>
                <dd id="AngleAnnotation.get_alpha" class="function">get_alpha</dd>
                <dd id="AngleAnnotation.get_visible" class="function">get_visible</dd>
                <dd id="AngleAnnotation.get_animated" class="function">get_animated</dd>
                <dd id="AngleAnnotation.get_in_layout" class="function">get_in_layout</dd>
                <dd id="AngleAnnotation.get_clip_on" class="function">get_clip_on</dd>
                <dd id="AngleAnnotation.get_clip_box" class="function">get_clip_box</dd>
                <dd id="AngleAnnotation.get_clip_path" class="function">get_clip_path</dd>
                <dd id="AngleAnnotation.get_transformed_clip_path_and_affine" class="function">get_transformed_clip_path_and_affine</dd>
                <dd id="AngleAnnotation.set_clip_on" class="function">set_clip_on</dd>
                <dd id="AngleAnnotation.get_rasterized" class="function">get_rasterized</dd>
                <dd id="AngleAnnotation.set_rasterized" class="function">set_rasterized</dd>
                <dd id="AngleAnnotation.get_agg_filter" class="function">get_agg_filter</dd>
                <dd id="AngleAnnotation.set_agg_filter" class="function">set_agg_filter</dd>
                <dd id="AngleAnnotation.set_visible" class="function">set_visible</dd>
                <dd id="AngleAnnotation.set_animated" class="function">set_animated</dd>
                <dd id="AngleAnnotation.set_in_layout" class="function">set_in_layout</dd>
                <dd id="AngleAnnotation.get_label" class="function">get_label</dd>
                <dd id="AngleAnnotation.set_label" class="function">set_label</dd>
                <dd id="AngleAnnotation.get_zorder" class="function">get_zorder</dd>
                <dd id="AngleAnnotation.set_zorder" class="function">set_zorder</dd>
                <dd id="AngleAnnotation.sticky_edges" class="variable">sticky_edges</dd>
                <dd id="AngleAnnotation.properties" class="function">properties</dd>
                <dd id="AngleAnnotation.update" class="function">update</dd>
                <dd id="AngleAnnotation.findobj" class="function">findobj</dd>
                <dd id="AngleAnnotation.get_cursor_data" class="function">get_cursor_data</dd>
                <dd id="AngleAnnotation.format_cursor_data" class="function">format_cursor_data</dd>
                <dd id="AngleAnnotation.get_mouseover" class="function">get_mouseover</dd>
                <dd id="AngleAnnotation.set_mouseover" class="function">set_mouseover</dd>
                <dd id="AngleAnnotation.mouseover" class="variable">mouseover</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="plot_angle">
                            <input id="plot_angle-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot_angle</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">ax</span>, </span><span class="param"><span class="n">pos</span>, </span><span class="param"><span class="n">angle</span>, </span><span class="param"><span class="n">length</span><span class="o">=</span><span class="mf">0.95</span>, </span><span class="param"><span class="n">acol</span><span class="o">=</span><span class="s1">&#39;C0&#39;</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="plot_angle-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#plot_angle"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="plot_angle-241"><a href="#plot_angle-241"><span class="linenos">241</span></a><span class="k">def</span> <span class="nf">plot_angle</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">acol</span><span class="o">=</span><span class="s2">&quot;C0&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="plot_angle-242"><a href="#plot_angle-242"><span class="linenos">242</span></a>    <span class="n">vec2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">angle</span><span class="p">))])</span>
</span><span id="plot_angle-243"><a href="#plot_angle-243"><span class="linenos">243</span></a>    <span class="n">xy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">c_</span><span class="p">[[</span><span class="n">length</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">vec2</span> <span class="o">*</span> <span class="n">length</span><span class="p">]</span><span class="o">.</span><span class="n">T</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="plot_angle-244"><a href="#plot_angle-244"><span class="linenos">244</span></a>    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">*</span><span class="n">xy</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">acol</span><span class="p">)</span>
</span><span id="plot_angle-245"><a href="#plot_angle-245"><span class="linenos">245</span></a>    <span class="k">return</span> <span class="n">AngleAnnotation</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xy</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


    

                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>